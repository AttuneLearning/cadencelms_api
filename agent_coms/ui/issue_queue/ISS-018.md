# ISS-018: Add Password Visibility Toggle to All Password Fields

**Priority:** low  
**Type:** polish  
**Status:** pending  
**Assigned:** UI Agent  
**Dependencies:** None

---

## Description

All password input fields in the application should have a "reveal password" toggle button (eye icon) that allows users to temporarily view the password they're typing. This is a standard UX pattern that improves accessibility and reduces input errors.

---

## Current Behavior

1. User types password in a password field
2. Characters are masked as dots/bullets
3. âŒ No way to verify what was typed

## Expected Behavior

1. User types password in a password field
2. Characters are masked as dots/bullets by default
3. âœ… Eye icon button appears at right edge of input
4. Clicking eye icon reveals password text
5. Icon changes to "eye-off" when password is visible
6. Clicking again hides password

---

## Password Fields to Update

| Location | Component/Field | File |
|----------|-----------------|------|
| **Login Page** | Password field | `src/pages/auth/LoginPage.tsx` |
| **Register Page** | Password field | `src/pages/auth/RegisterPage.tsx` |
| **Register Page** | Confirm Password field | `src/pages/auth/RegisterPage.tsx` |
| **Change Password** | Current Password | `src/pages/profile/ChangePasswordForm.tsx` |
| **Change Password** | New Password | `src/pages/profile/ChangePasswordForm.tsx` |
| **Change Password** | Confirm New Password | `src/pages/profile/ChangePasswordForm.tsx` |
| **Admin Escalation** | Escalation Password | `src/features/auth/ui/EscalationModal.tsx` |
| **Reset Password** | New Password fields | `src/pages/auth/ResetPasswordPage.tsx` |

---

## Implementation Options

### Option A: Create Reusable PasswordInput Component (Recommended)

```tsx
// src/shared/ui/PasswordInput.tsx
import { useState } from 'react';
import { Eye, EyeOff } from 'lucide-react';
import { Input } from '@/components/ui/input';
import { Button } from '@/components/ui/button';
import { cn } from '@/lib/utils';

interface PasswordInputProps extends React.InputHTMLAttributes<HTMLInputElement> {
  // Inherits all standard input props
}

export function PasswordInput({ className, ...props }: PasswordInputProps) {
  const [showPassword, setShowPassword] = useState(false);

  return (
    <div className="relative">
      <Input
        type={showPassword ? 'text' : 'password'}
        className={cn('pr-10', className)}
        {...props}
      />
      <Button
        type="button"
        variant="ghost"
        size="sm"
        className="absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent"
        onClick={() => setShowPassword(!showPassword)}
        aria-label={showPassword ? 'Hide password' : 'Show password'}
      >
        {showPassword ? (
          <EyeOff className="h-4 w-4 text-muted-foreground" />
        ) : (
          <Eye className="h-4 w-4 text-muted-foreground" />
        )}
      </Button>
    </div>
  );
}
```

### Option B: Add Toggle to Existing shadcn Input

Extend the existing Input component to support a `type="password"` variant with built-in toggle.

---

## Visual Design

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢                        ğŸ‘  â”‚  â† Password hidden (Eye icon)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MySecretPass123                     ğŸ‘â€ğŸ—¨  â”‚  â† Password visible (EyeOff icon)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Icon States:**
- `Eye` (lucide-react) - Password is hidden, click to reveal
- `EyeOff` (lucide-react) - Password is visible, click to hide

---

## Acceptance Criteria

### Functionality
- [ ] All password fields have a toggle button
- [ ] Toggle reveals/hides password text
- [ ] Icon changes based on visibility state
- [ ] Toggle is keyboard accessible (Tab + Enter/Space)
- [ ] Screen reader announces state ("Show password" / "Hide password")

### Visual
- [ ] Icon positioned inside input on right edge
- [ ] Icon has hover/focus states
- [ ] Icon doesn't overlap with text
- [ ] Works with various input widths
- [ ] Matches existing design system styling

### Security
- [ ] Password defaults to hidden state
- [ ] Visibility resets to hidden on form submit
- [ ] Visibility resets to hidden on blur (optional - discuss)
- [ ] No password exposed in DOM when hidden

### Accessibility
- [ ] Button has `aria-label` describing action
- [ ] Button is focusable via keyboard
- [ ] Works with password managers (no interference)
- [ ] Color contrast meets WCAG guidelines

---

## Related Files

**New File:**
- `src/shared/ui/PasswordInput.tsx` - Reusable password input component

**Files to Update:**
- `src/pages/auth/LoginPage.tsx`
- `src/pages/auth/RegisterPage.tsx`
- `src/pages/auth/ResetPasswordPage.tsx`
- `src/pages/profile/ChangePasswordForm.tsx` (if exists)
- `src/features/auth/ui/EscalationModal.tsx`

**Component Library:**
- Uses `lucide-react` icons (Eye, EyeOff)
- Uses existing shadcn/ui Input and Button components

---

## Notes

- This is a standard UX pattern expected by users
- Improves accessibility for users with motor difficulties
- Reduces password entry errors
- Should be implemented as a reusable component for consistency
- Consider auto-hiding after a timeout (e.g., 30 seconds) for security
- Mobile: ensure touch target is large enough (44x44px minimum)
