### ISS-015: Dashboard NavItem Not Dynamic - Hardcoded to Learner Dashboard

**Priority:** high
**Type:** bug
**Status:** ✅ COMPLETED (2026-01-13)
**Assigned:** UI Agent
**Dependencies:** None

**Description:**
The "Dashboard" navigation item in the sidebar is currently hardcoded to `/learner/dashboard` instead of being dynamic based on the user's current dashboard context and userTypes. This causes the Dashboard link to always navigate to the Learner Dashboard regardless of which dashboard the user is currently viewing.

**Current Behavior:**
1. User is on Staff Dashboard (`/staff/dashboard`)
2. User clicks "Dashboard" link in sidebar
3. ❌ User is navigated to `/learner/dashboard` instead of staying on staff dashboard
4. Same issue occurs from Admin Dashboard

**Expected Behavior:**

1. **Dynamic Path Resolution:**
   - If currently on `/learner/*` routes → Dashboard links to `/learner/dashboard`
   - If currently on `/staff/*` routes → Dashboard links to `/staff/dashboard`
   - If currently on `/admin/*` routes → Dashboard links to `/admin/dashboard`

2. **Default Dashboard (on login/initial load):**
   - If user has `staff` in userTypes → default to `/staff/dashboard`
   - If user has `global-admin` in userTypes → default to `/staff/dashboard` (admin requires escalation)
   - If user ONLY has `learner` in userTypes → default to `/learner/dashboard`

**Priority Order for Default:**
```
1. staff → /staff/dashboard
2. global-admin → /staff/dashboard (not admin, requires escalation per ISS-013)
3. learner → /learner/dashboard
```

**Root Cause:**
In [navItems.ts](src/widgets/sidebar/config/navItems.ts), the `getPrimaryDashboardPath()` function or the Dashboard BASE_NAV_ITEM is likely using `primaryUserType` incorrectly or is hardcoded.

**Current Code (likely issue):**
```typescript
// navItems.ts - getPrimaryDashboardPath
export const getPrimaryDashboardPath = (primaryUserType: UserType): string => {
  switch (primaryUserType) {
    case 'learner':
      return '/learner/dashboard';
    case 'staff':
      return '/staff/dashboard';
    case 'global-admin':
      return '/admin/dashboard';  // ← This is wrong - should be /staff/dashboard
    default:
      return '/learner/dashboard'; // ← Wrong default
  }
};
```

**Expected Code:**
```typescript
// Two separate functions needed:

// 1. Get CURRENT dashboard based on route (for nav highlighting)
export const getCurrentDashboardPath = (currentDashboard: DashboardContext): string => {
  switch (currentDashboard) {
    case 'learner': return '/learner/dashboard';
    case 'staff': return '/staff/dashboard';
    case 'admin': return '/admin/dashboard';
    default: return '/staff/dashboard';
  }
};

// 2. Get DEFAULT dashboard based on userTypes (for login redirect)
export const getDefaultDashboardPath = (userTypes: UserType[]): string => {
  // Priority: staff > global-admin > learner
  if (userTypes.includes('staff')) return '/staff/dashboard';
  if (userTypes.includes('global-admin')) return '/staff/dashboard'; // Admin requires escalation
  if (userTypes.includes('learner')) return '/learner/dashboard';
  return '/staff/dashboard'; // Fallback
};
```

**Dashboard NavItem Fix:**
```typescript
// BASE_NAV_ITEMS
{
  label: 'Dashboard',
  path: (_primaryUserType, currentDashboard) => {
    // Use current dashboard context, not primaryUserType
    return getCurrentDashboardPath(currentDashboard);
  },
  icon: Home,
},
```

---

