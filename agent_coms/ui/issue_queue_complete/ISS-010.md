### ISS-010: PersonExtended & Demographics Profile Forms - Staff & Learner

**Priority:** medium
**Type:** feature
**Status:** âœ… COMPLETED (2026-01-13)
**Assigned:** UI Agent (3-agent specialized team)
**Dependencies:** ISS-009 (Profile context routing - RESOLVED)
**Specification:** See [ISS-010_PERSON_EXTENDED_FORMS.md](./specs/ISS-010_PERSON_EXTENDED_FORMS.md)
**Clarifications:** See [ISS-010_CLARIFICATIONS.md](./specs/ISS-010_CLARIFICATIONS.md)

**Description:**
Add PersonExtended and Demographics fields to the context-specific profile pages:
- **Staff Profile** (`/staff/profile`): `IStaffPersonExtended` + employee-relevant `IDemographics` (EEO, work authorization, veteran status)
- **Learner Profile** (`/learner/profile`): `ILearnerPersonExtended` + student-relevant `IDemographics` (IPEDS, Title IX, financial aid eligibility)

Fields grouped into logical collapsible sections with appropriate validation. Demographics are optional and require explicit consent.

**High-Level Overview:**

#### Staff Profile (`/staff/profile`) - IStaffPersonExtended

| Section | Fields | Required |
|---------|--------|----------|
| **Professional Info** | professionalTitle, headline, academicRank, contractType | None |
| **Employment** | employeeId (readonly), hireDate (readonly), officeLocation | None |
| **Credentials** | credentials[] (type, name, issuingOrganization, dates) | name, issuingOrganization when adding |
| **Office Hours** | officeHours[] (day, start, end, location, notes) | day, startTime, endTime when adding |
| **Research & Publications** | researchInterests[], publications[] | title, authors, venue when adding pub |
| **Professional Links** | linkedInUrl, orcidId, googleScholarUrl, websiteUrl | Valid URL format |
| **Memberships** | professionalMemberships[] | organizationName when adding |
| **Demographics: Identity** | legalGender, genderIdentity, pronouns | None (EEO voluntary) |
| **Demographics: EEO** | isHispanicLatino, race[], veteranStatus | None (EEO voluntary) |
| **Demographics: Work Authorization** | citizenship, countryOfCitizenship, visaType, visaExpirationDate | visaExpiration if visaType set |
| **Demographics: Disability** | hasDisability, disabilityType[], accommodationsRequired | None (voluntary) |
| **Demographics: Language** | primaryLanguage, englishProficiency, otherLanguages[] | None |
| **Demographics: Consent** | allowReporting, allowResearch | Display current consent status |

#### Learner Profile (`/learner/profile`) - ILearnerPersonExtended + IDemographics

| Section | Fields | Required |
|---------|--------|----------|
| **Student Info** | studentId (readonly), enrollmentStatus (readonly), expectedGraduationDate | None |
| **Emergency Contacts** | emergencyContacts[] (name, relationship, phone, email) | fullName, relationship, primaryPhone (min 1 contact) |
| **Parent/Guardian** | parentGuardians[] (name, relationship, phones, emails) | fullName, relationship, 1 phone when adding |
| **Identification** | identifications[] (type, number, dates) | idType, idNumber when adding |
| **Prior Education** | priorEducation[] (institution, type, dates, GPA) | institutionName, institutionType when adding |
| **Accommodations** | accommodations[] (type, description, dates) | type when adding |
| **Housing & Parking** | housingStatus, residenceHall, roomNumber, vehicleOnCampus, vehicleInfo, parkingPermit | None |
| **Demographics: Identity** | legalGender, genderIdentity, pronouns | None (Title IX voluntary) |
| **Demographics: IPEDS** | isHispanicLatino, race[], citizenship | None (IPEDS voluntary) |
| **Demographics: First Generation** | firstGenerationStudent, parent1EducationLevel, parent2EducationLevel | None |
| **Demographics: Veteran** | veteranStatus, militaryBranch, yearsOfService | None (GI Bill info) |
| **Demographics: Disability** | hasDisability, disabilityType[], accommodationsRequired | None (Section 504) |
| **Demographics: Language** | primaryLanguage, englishProficiency, otherLanguages[] | None (ESL services) |
| **Demographics: Financial** | maritalStatus, numberOfDependents, pellEligible, lowIncomeStatus | None (financial aid) |
| **Demographics: Religion** | religiousAffiliation, religiousAccommodations | None |
| **Demographics: Consent** | allowReporting, allowResearch | Display current consent status |

**Acceptance Criteria:**
- [ ] Staff profile shows IStaffPersonExtended fields in collapsible sections
- [ ] Learner profile shows ILearnerPersonExtended fields in collapsible sections
- [ ] Array fields (credentials, emergencyContacts, etc.) support add/edit/remove
- [ ] Required field validation displays inline errors
- [ ] URL fields validate format (linkedInUrl, websiteUrl, etc.)
- [ ] Phone fields use US phone format validation (+1 format)
- [ ] Date fields use date picker with appropriate constraints
- [ ] Readonly fields (employeeId, studentId) display but cannot be edited
- [ ] Forms auto-save on blur or use explicit save button per section
- [ ] API integration: GET/PUT `/users/me/person/extended`
- [ ] API integration: GET/PUT `/users/me/demographics`
- [ ] Demographics sections show voluntary/optional nature clearly
- [ ] Demographics consent toggles (allowReporting, allowResearch) prominent
- [ ] Staff demographics appropriate for EEO/employment compliance
- [ ] Learner demographics appropriate for IPEDS/Title IX/financial aid
- [ ] Loading and error states handled gracefully
- [ ] Mobile responsive design

**Related Files:**
- `src/pages/profile/ProfilePage.tsx` (existing)
- `src/pages/profile/StaffProfileExtended.tsx` (new)
- `src/pages/profile/LearnerProfileExtended.tsx` (new)
- `src/entities/user-profile/model/types.ts` (add extended types)
- `src/entities/user-profile/api/userProfileApi.ts` (add extended endpoints)
- `api/contracts/types/person-types.ts` (source of truth)

**Notes:**
- Detail specification in `./specs/ISS-010_PERSON_EXTENDED_FORMS.md`
- Uses existing shadcn/ui form components
- Follows existing phone validation pattern from UserProfileForm.tsx

---

