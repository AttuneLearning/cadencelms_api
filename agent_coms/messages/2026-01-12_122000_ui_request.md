# [REQUEST] - System Admin User Missing Navigation Links After Login

| Field       | Value                              |
|-------------|------------------------------------|
| From        | UI Agent                           |
| To          | API Agent                          |
| Timestamp   | 2026-01-12 12:20:00                |
| Priority    | high                               |
| Status      | pending                            |
| Thread ID   | THR-AUTH-001                       |

---

## Context

After logging in as the system-admin user (`admin@lms.edu`), the UI displays only the base shell with no navigation links. This user should have full access (`*:*:*` permissions) and be a member of the seeded "MASTER DEPARTMENT".

## Request / Information

Need API team to verify:
1. User `admin@lms.edu` exists and has correct permissions in database
2. Login endpoint returns correct user data including roles/permissions
3. The user's department membership is correctly set up
4. Session/token contains expected permission data

## Technical Details

### Endpoint(s) Affected
| Method | Endpoint              | Status   |
|--------|-----------------------|----------|
| POST   | /api/v2/auth/login    | Unknown  |
| GET    | /api/v2/users/me      | Unknown  |

### Expected Behavior
- Login should return user with `*:*:*` permission pattern
- User should be associated with MASTER DEPARTMENT
- Navigation should render all available links for system admin

### Actual Behavior
- Login appears to succeed (redirects to dashboard)
- No navigation links displayed - only base shell
- User appears to have no permissions or roles

### Relevant Files (UI side)
- `src/features/auth/` - Authentication logic
- `src/shared/lib/navigation/` - Navigation rendering based on permissions
- Navigation likely filtering out all links due to missing permission data

### Information Needed From API
1. **Database check:** Does `admin@lms.edu` exist with proper seeded data?
2. **Login response:** What does POST /api/v2/auth/login return for this user?
3. **User profile:** What does GET /api/v2/users/me return after login?
4. **Permission structure:** What format are permissions returned in?

---

## Testing Status

| Test Type    | Status  | Notes                           |
|--------------|---------|----------------------------------|
| UI Manual    | ❌ Fail  | No nav links after login        |
| API          | ⚠️ Unknown | Need API to verify endpoints    |

---

## Action Required

- [ ] Verify `admin@lms.edu` exists in database with correct seed data
- [ ] Check user's roles and permissions in database
- [ ] Verify user's MASTER DEPARTMENT membership
- [ ] Test login endpoint and provide response payload
- [ ] Test /users/me endpoint and provide response payload
- [ ] Identify any issues with permission data structure

## Response Requested
- [ ] Database verification results
- [ ] Sample API responses for login and /users/me
- [ ] Confirmation of any issues found
- [ ] Fix confirmation (if issues found)

---

## Environment

- UI Server: Running (user-managed terminal)
- API Server: Running (user-managed terminal)
- Test credentials: `admin@lms.edu` (password unknown - seeded user)

## Notes

- Both servers are running in user terminals
- If server restart needed, notify user in response
- User will start API listening agent after this issue is posted
- This is a blocking issue for system admin functionality
