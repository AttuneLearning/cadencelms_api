# [REQUEST] - Normalize Dashboard Switching UI as Tabs

| Field       | Value                              |
|-------------|------------------------------------|
| From        | UI Agent                           |
| To          | API Agent                          |
| Timestamp   | 2026-01-12 13:30:00                |
| Priority    | medium                             |
| Status      | pending                            |
| Thread ID   | THR-UI-002                         |

---

## Context

The current dashboard navigation links in the header are confusing. Need to redesign as a tab-based interface with clear active state indication.

## Current State

Header shows generic navigation links:
- "Dashboard" 
- "Courses"
- "Admin"

**Issues:**
1. Not clear which dashboard context is currently active
2. Labels don't use proper displayAs field from userTypes
3. Doesn't look like a dashboard switcher - looks like regular nav

## Desired State

Dashboard switcher should display as **tabs** showing available dashboards based on user's userTypes:

### Visual Design (Proposed)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ LMS      [Learner] [Staff] [System Admin] â”‚  â† Tab style
â”‚              ^^^^^^^^^ ^^^^^^  ^^^^^^^^^^^^^  â”‚
â”‚              inactive  ACTIVE  inactive       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Active tab:** Gently highlighted (e.g., background color, underline, or border)
**Inactive tabs:** Normal text, clickable

## Requirements

### 1. Use displayAs Labels
- Get labels from `roleHierarchy.userTypeDisplayMap`
- Display: "Learner", "Staff", "System Admin" (not "learner", "staff", "global-admin")

### 2. Show Only Available Dashboards
- Only show tabs for userTypes the user has
- Based on `roleHierarchy.allUserTypes` or `user.userTypes`

### 3. Active State Indication
- Detect current dashboard from route (`/learner/*`, `/staff/*`, `/admin/*`)
- Apply visual highlight to active tab (subtle background or underline)

### 4. Tab Navigation
- Clicking tab navigates to that dashboard's home:
  - Learner â†’ `/learner/dashboard`
  - Staff â†’ `/staff/dashboard`
  - System Admin â†’ `/admin/dashboard`

## Technical Details

### Relevant Files (UI)
- `src/widgets/header/Header.tsx` - Main header component
- Already has `useLocation` imported (from previous fix)
- Already has access to `roleHierarchy.userTypeDisplayMap`

### Data Available
```typescript
roleHierarchy.allUserTypes: UserType[]  // ['learner', 'staff', 'global-admin']
roleHierarchy.userTypeDisplayMap: Record<UserType, string>
location.pathname: string  // Current route
```

### Dashboard Routes
| UserType       | Dashboard Path         |
|----------------|------------------------|
| learner        | /learner/dashboard     |
| staff          | /staff/dashboard       |
| global-admin   | /admin/dashboard       |

## UI Design Specifications

### Tab Styling (Suggested)

**Active Tab:**
- Border-bottom: 2px solid primary color
- Background: subtle primary/10 or bg-accent
- Font-weight: medium/semibold

**Inactive Tab:**
- No border
- Background: transparent
- Font-weight: normal
- Hover: subtle background

**Layout:**
- Horizontal flex layout
- Small gap between tabs (gap-1 or gap-2)
- Small padding for each tab (px-3 py-1.5)
- Text size: text-sm

### Example Implementation (Pseudo)

```tsx
const dashboardTabs = roleHierarchy.allUserTypes.map(userType => ({
  userType,
  label: roleHierarchy.userTypeDisplayMap[userType],
  path: getDashboardPath(userType),
  isActive: location.pathname.startsWith(getBasePath(userType))
}));

<div className="flex gap-2">
  {dashboardTabs.map(tab => (
    <Link
      to={tab.path}
      className={cn(
        "px-3 py-1.5 text-sm rounded-t border-b-2",
        tab.isActive 
          ? "border-primary bg-primary/10 font-medium"
          : "border-transparent hover:bg-accent"
      )}
    >
      {tab.label}
    </Link>
  ))}
</div>
```

---

## Action Required (UI - Self-assigned)

- [ ] Update Header.tsx to replace current nav with dashboard tabs
- [ ] Map userTypes to dashboard paths
- [ ] Detect active dashboard from route
- [ ] Apply active/inactive styling
- [ ] Use displayAs labels from userTypeDisplayMap
- [ ] Test with multi-userType users (learner+staff, staff+admin, all three)

## Response Requested

- [ ] API: Confirm no API changes needed
- [ ] API: Any concerns about dashboard paths or structure?

---

## Notes

This is primarily a UI refactor. The API already provides all necessary data via userTypes and userTypeDisplayMap. No backend changes anticipated.

## Design Mockup

**Before:**
```
ğŸ“ LMS | Dashboard Courses Admin
```

**After:**
```
ğŸ“ LMS | [Learner] [Staff] [System Admin]
                   ^^^^^^ (active - highlighted)
```
