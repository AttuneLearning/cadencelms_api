{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "AI Module Input Schema",
  "description": "Schema for AI-driven module creation",
  "type": "object",
  "required": ["title", "type"],
  "properties": {
    "title": {
      "type": "string",
      "minLength": 1,
      "maxLength": 255,
      "description": "Module title",
      "examples": ["Introduction to Variables", "Advanced Algorithms", "Week 1 Quiz"]
    },
    "description": {
      "type": "string",
      "maxLength": 2000,
      "description": "Module description explaining what students will learn"
    },
    "type": {
      "type": "string",
      "enum": ["custom", "scorm", "video", "document", "exercise"],
      "description": "Type of module content. Determines which content fields are required."
    },
    "orderIndex": {
      "type": "number",
      "minimum": 1,
      "description": "Display order of the module within the course. If not provided, will be auto-assigned sequentially starting from 1."
    },
    "content": {
      "type": "object",
      "description": "Module content structure. Required fields vary by module type.",
      "properties": {
        "text": {
          "type": "string",
          "description": "HTML content for custom modules. Rich text with formatting, images, links, etc."
        },
        "scormPackage": {
          "type": "string",
          "format": "uri",
          "description": "URL to SCORM package ZIP file. Required for scorm type modules."
        },
        "videoUrl": {
          "type": "string",
          "format": "uri",
          "description": "URL to video file or streaming service. Required for video type modules."
        },
        "documentUrl": {
          "type": "string",
          "format": "uri",
          "description": "URL to document (PDF, DOCX, etc.). Required for document type modules."
        },
        "attachments": {
          "type": "array",
          "description": "Additional files attached to the module",
          "items": {
            "type": "object",
            "required": ["type", "url", "title"],
            "properties": {
              "type": {
                "type": "string",
                "description": "Attachment type (e.g., pdf, video, image, document)",
                "examples": ["pdf", "video", "image", "document", "audio"]
              },
              "url": {
                "type": "string",
                "format": "uri",
                "description": "URL to the attachment file"
              },
              "title": {
                "type": "string",
                "minLength": 1,
                "maxLength": 255,
                "description": "Display title for the attachment"
              },
              "description": {
                "type": "string",
                "maxLength": 500,
                "description": "Optional description of the attachment"
              }
            }
          },
          "maxItems": 20
        }
      }
    },
    "exercise": {
      "type": "object",
      "description": "Exercise/quiz data. Required when module type is 'exercise'.",
      "required": ["title", "type", "passingScore", "questions"],
      "properties": {
        "title": {
          "type": "string",
          "minLength": 1,
          "maxLength": 255,
          "description": "Exercise title"
        },
        "type": {
          "type": "string",
          "enum": ["quiz", "exam", "practice", "assessment"],
          "description": "Type of exercise"
        },
        "passingScore": {
          "type": "number",
          "minimum": 0,
          "maximum": 100,
          "description": "Minimum score percentage to pass (0-100)"
        },
        "timeLimit": {
          "type": "number",
          "minimum": 1,
          "description": "Time limit in minutes"
        },
        "questions": {
          "type": "array",
          "minItems": 1,
          "maxItems": 100,
          "description": "Array of questions",
          "items": {
            "type": "object"
          }
        },
        "description": {
          "type": "string",
          "maxLength": 2000,
          "description": "Exercise instructions"
        },
        "allowMultipleAttempts": {
          "type": "boolean",
          "default": true
        },
        "shuffleQuestions": {
          "type": "boolean",
          "default": false
        }
      }
    }
  },
  "examples": [
    {
      "description": "Custom module with text content",
      "data": {
        "title": "Introduction to Variables",
        "description": "Learn about variables and data types in programming",
        "type": "custom",
        "orderIndex": 1,
        "content": {
          "text": "<h1>Variables in Programming</h1><p>A variable is a named container for storing data values.</p><h2>Types of Variables</h2><ul><li>Integer</li><li>String</li><li>Boolean</li></ul>"
        }
      }
    },
    {
      "description": "SCORM module with interactive content",
      "data": {
        "title": "Interactive JavaScript Tutorial",
        "description": "Hands-on SCORM package for learning JavaScript basics",
        "type": "scorm",
        "orderIndex": 2,
        "content": {
          "scormPackage": "https://cdn.example.com/scorm/js-basics-v1.2.zip"
        }
      }
    },
    {
      "description": "Video module with attachments",
      "data": {
        "title": "Introduction to Algorithms Lecture",
        "description": "Video lecture covering fundamental algorithms",
        "type": "video",
        "orderIndex": 3,
        "content": {
          "videoUrl": "https://vimeo.com/123456789",
          "attachments": [
            {
              "type": "pdf",
              "url": "https://example.com/lecture-slides.pdf",
              "title": "Lecture Slides",
              "description": "PDF slides from the video lecture"
            },
            {
              "type": "document",
              "url": "https://example.com/code-examples.zip",
              "title": "Code Examples",
              "description": "Sample code discussed in the lecture"
            }
          ]
        }
      }
    },
    {
      "description": "Exercise module with quiz",
      "data": {
        "title": "Week 1 Assessment",
        "description": "Test your understanding of variables and data types",
        "type": "exercise",
        "orderIndex": 4,
        "exercise": {
          "title": "Variables Quiz",
          "type": "quiz",
          "passingScore": 75,
          "timeLimit": 20,
          "description": "Answer questions about variables, data types, and basic programming concepts",
          "allowMultipleAttempts": true,
          "shuffleQuestions": false,
          "questions": [
            {
              "type": "multiple_choice",
              "questionText": "Which of the following is a valid variable name in most programming languages?",
              "points": 10,
              "options": [
                {
                  "text": "myVariable",
                  "isCorrect": true
                },
                {
                  "text": "123variable",
                  "isCorrect": false
                },
                {
                  "text": "my-variable",
                  "isCorrect": false
                }
              ]
            }
          ]
        }
      }
    },
    {
      "description": "Document module",
      "data": {
        "title": "Course Syllabus",
        "description": "Complete course syllabus and requirements",
        "type": "document",
        "orderIndex": 1,
        "content": {
          "documentUrl": "https://example.com/syllabus-cs101.pdf"
        }
      }
    }
  ],
  "validations": {
    "title": {
      "description": "Module title is required and must be 1-255 characters"
    },
    "type": {
      "description": "Module type is required and must be one of: custom, scorm, video, document, exercise"
    },
    "content.scormPackage": {
      "description": "SCORM package URL is required for scorm type modules"
    },
    "content.videoUrl": {
      "description": "Video URL is required for video type modules"
    },
    "content.documentUrl": {
      "description": "Document URL is required for document type modules"
    },
    "exercise": {
      "description": "Exercise data is required when module type is 'exercise'"
    },
    "orderIndex": {
      "description": "Order index must be a positive integer if provided. Auto-assigned if omitted."
    }
  }
}
